<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webbooster test task</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    
<section>

    <article>
        
        <div class="sku__element">
            <figure><img src="http://dev-wbooster.ru/test_task/img/img-1.png" alt=""></figure>
            <figcaption id="sku001">Парикмахерское кресло «Норм» гидравлическое1</figcaption>
            <div class="sku__price"><H1>9 900 &#8381;</H1></div>
            <button id="u001" class="buttonbuy">Купить</button>
        </div>

        <div class="sku__element">
            <figure><img src="http://dev-wbooster.ru/test_task/img/img-1.png" alt=""></figure>
            <figcaption id="sku002">Парикмахерское кресло «Норм» гидравлическое2</figcaption>
            <div class="sku__price"><H1>9 900 &#8381;</H1></div>
            <button id="u002" class="buttonbuy">Купить</button>
        </div>

        <div class="sku__element">
            <figure><img src="http://dev-wbooster.ru/test_task/img/img-1.png" alt=""></figure>
            <figcaption id="sku003">Парикмахерское кресло «Норм» гидравлическое3</figcaption>
            <div class="sku__price"><H1>9 900 &#8381;</H1></div>
            <button id="u003" class="buttonbuy">Купить</button>
        </div>

        <div class="sku__element">
            <figure><img src="http://dev-wbooster.ru/test_task/img/img-1.png" alt=""></figure>
            <figcaption id="sku004">Парикмахерское кресло «Норм» гидравлическое4</figcaption>
            <div class="sku__price"><H1>9 900 &#8381;</H1></div>
            <button id="u004" class="buttonbuy">Купить</button>
        </div>

    </article>
    
</section>

<!-- The Modal -->
<div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span><br>
      <form action="mailto:info@wbooster.ru">
        <input type="text" placeholder="Имя" id="clientName"><br>
        <input type="text" placeholder="Телефон" id="clientPhone"><br>
        <input type="text" placeholder="E-mail" id="clientEmail"><br>
        <textarea name="GoodsInterested" id="goodsChosen" cols="30" rows="10" >Меня заинтересовал товар : </textarea><br>
        <input type="submit" value="Отправить">
      </form>
    </div>
  
  </div>
<p>Вывод списка товаров<p>
<article id="jsonout"></article>


<script src="js/modal.js"></script>
<script>
let buttonCount = document.getElementsByClassName("buttonbuy").length+1; //increasing id value of buttons

var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    let response = JSON.parse(xhttp.responseText)

    const output = document.getElementById('jsonout');
    const beforePrice = `</figcaption><div class="sku__price"><H1>`;
    const beforeName = `" alt=""></figure><figcaption id="sku003">`;
    const beforeImage =`<div class="sku__element"><figure><img src="`;
    
    for(let key in response.product){
        let lastPriceAndButton = `&#8381;</H1></div><button id="u00${buttonCount}" class="buttonbuy">Купить</button></div>`

        output.innerHTML += `${beforeImage}${response.product[key].img}${beforeName}${response.product[key].name} ${beforePrice} ${response.product[key].price} ${lastPriceAndButton}`;
        buttonCount++;
    }
    }
}
xhttp.open("GET", "goods.json", true);
xhttp.send();

</script>
</body>
</html>